{"version":3,"file":"StarRating.f20ce1cd.js","sources":["../../src/asset/icon/star-filled.svg","../../src/asset/icon/star-outline.svg","../../src/component/star-rating/StarRating.tsx"],"sourcesContent":["export default \"__VITE_ASSET__d3e6baa8__\"","export default \"__VITE_ASSET__88237f4d__\"","import React, { useRef, useState } from \"react\";\nimport \"./StarRating.css\";\nimport StarFilled from \"../../asset/icon/star-filled.svg\";\nimport StarOutline from \"../../asset/icon/star-outline.svg\";\n\nexport interface StarRatingProps {\n  onClick?: (value: number) => void;\n  display: boolean;\n  rating: number;\n  numStars: number;\n  precision: number;\n}\n\n// if this component is being used on the Add Review page, set rating = -1\nexport const StarRating = ({\n  onClick,\n  display,\n  rating,\n  numStars,\n  precision,\n}: StarRatingProps) => {\n  const [activeStar, setActiveStar] = useState(rating);\n  const [hoverActiveStar, setHoverActiveStar] = useState(-1);\n  const [isHovered, setIsHovered] = useState(false);\n  const ratingRef = useRef(document.createElement(\"div\"));\n\n  const roundRating = (e: { clientX: number }) => {\n    const { width, left } = ratingRef.current.getBoundingClientRect();\n    let percent = (e.clientX - left) / width;\n    const numberInStars = percent * numStars;\n    const nearestNumber =\n      Math.round((numberInStars + precision / 2) / precision) * precision;\n\n    return Number(\n      nearestNumber.toFixed(precision.toString().split(\".\")[1]?.length || 0)\n    );\n  };\n\n  const handleClick = (e: { clientX: number }) => {\n    setIsHovered(false);\n    let newRating = roundRating(e);\n    setActiveStar(newRating);\n    if (onClick) onClick(newRating);\n  };\n\n  const handleMouseMove = (e: { clientX: number }) => {\n    setIsHovered(true);\n    setHoverActiveStar(roundRating(e));\n  };\n\n  const handleMouseLeave = () => {\n    setHoverActiveStar(-1);\n    setIsHovered(false);\n  };\n\n  const displayProps = {\n    className: \"stars\",\n    ref: ratingRef,\n    onClick: !display ? handleClick : undefined,\n    onMouseMove: !display ? handleMouseMove : undefined,\n    onMouseLeave: !display ? handleMouseLeave : undefined,\n  };\n\n  return (\n    <div {...displayProps}>\n      {[...new Array(numStars)].map((arr, index) => {\n        const activeState = isHovered ? hoverActiveStar : activeStar;\n        const showEmptyStar = activeState === -1 || activeState < index + 1;\n\n        const isRatingEqualToIndex = Math.ceil(activeState) === index + 1;\n\n        return (\n          <div className=\"star\" key={index}>\n            <div\n              style={{\n                width: isRatingEqualToIndex\n                  ? `${(activeState % 1) * 100}%`\n                  : \"0%\",\n                overflow: \"hidden\",\n                position: \"absolute\",\n              }}\n            >\n              <img src={StarFilled} />\n            </div>\n            <div>\n              {showEmptyStar ? (\n                <img src={StarOutline} />\n              ) : (\n                <img src={StarFilled} />\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n"],"names":["StarFilled","StarOutline","StarRating","__name","onClick","display","rating","numStars","activeStar","setActiveStar","useState","hoverActiveStar","setHoverActiveStar","isHovered","setIsHovered","ratingRef","useRef","roundRating","e","width","left","numberInStars","nearestNumber","precision","_a","_jsx","newRating","undefined","displayProps","activeState","showEmptyStar","index","isRatingEqualToIndex","_jsxs"],"mappings":"2IAAA,MAAeA,EAAA,qDCAAC,EAAA,sDCcRC,EAAAC,EAAA,CAAA,CAAoB,QAAAC,EACzBA,QAAAA,EACAC,OAAAA,EACAC,SAAAA,EACAC,UAAAA,CAEe,IAAA,CACf,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAAJ,CAAA,EACA,CAAAK,EAAAC,CAAA,EAAAF,EAAAA,QAAAA,SAAA,EAAA,EACA,CAAAG,EAAAC,CAAA,EAAAJ,EAAA,QAAA,SAAA,EAAA,EACAK,EAAAC,EAAAA,QAAAA,OAAA,SAAA,cAAA,KAAA,CAAA,EAEAC,EAAAd,EAAAe,GAAA,OACE,KAAA,CAAM,MAAAC,EAAEA,KAAAA,CAAOC,EAAAA,EAAAA,QAAAA,wBAEfC,GADAH,EAAA,QAAAE,GAAAD,EACAZ,EACAe,EAAA,KAAA,OAAAD,EAAAE,EAAA,GAAAA,CAAA,EAAAA,EAGA,OAAA,OAAAD,EAAA,UAAAE,EAAAD,EAAA,SAAA,EAAA,MAAA,GAAA,EAAA,KAAA,YAAAC,EAAA,SAAA,CAAA,CAAA,CACwE,EAR1E,eAqCA,OAAAC,EAAA,MAAA,CACE,GATF,CAAqB,UAAA,QACR,IAAAV,EACNA,QAAAA,EAAAA,OAnBPZ,EAAAe,GAAA,CACEJ,EAAAA,EAAAA,EACA,IAAAY,EAAAT,EAAAC,CAAA,EACAT,EAAAA,CAAAA,EACAL,GAAaA,EAAAA,CAAAA,CAAiB,EAJhC,eAoBoCuB,YAAAA,EAAAA,OAbpCxB,EAAAe,GAAA,CACEJ,EAAAA,EAAAA,EACAF,EAAAA,EAAAA,CAAAA,CAAAA,CAAiC,EAFnC,mBAc4Ce,aAAAA,EAAAA,OAT5CxB,EAAA,IAAA,CACES,EAAAA,EAAAA,EACAE,EAAAA,EAAAA,CAAkB,EAFpB,mBAU8Ca,EAInCC,SAAAA,CAAAA,GAAAA,IAAAA,MAAAA,CAAAA,CAAAA,EAAAA,IAAAA,CAAAA,EAAAA,IAAAA,CAEL,MAAAC,EAAAhB,EAAAF,EAAAH,EACAsB,EAAAD,IAAA,IAAAA,EAAAE,EAAA,EAEAC,EAAA,KAAA,KAAAH,CAAA,IAAAE,EAAA,EAEA,OAAAE,EAAA,MAAA,CACE,UAAA,OAAe,SAAA,CAAAR,EAAA,MAAA,CACb,MAAA,CACS,MAAAO,EAAA,GAAAH,EAAA,EAAA,OAAA,KAGD,SAAA,SACM,SAAA,UACA,EACZ,SAAAJ,EAAA,MAAA,CAEA,IAAAzB,CAAUA,CAAAA,CAAW,CAAA,EAAAyB,EAAA,MAAA,CAEvB,SAAAK,EAAAL,EAAA,MAAA,CAEI,IAAAxB,CAAUA,CAAAA,EAAAA,EAAAA,MAAAA,CAEV,IAAAD,CAAUA,CAAAA,CAAW,CAAA,CAAA,CAEnB,EAAA+B,CAAA,CAlBwB,CAAA,CAqBnC,CAAA,CAGP,EAlFO"}