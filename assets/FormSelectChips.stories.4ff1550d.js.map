{"version":3,"file":"FormSelectChips.stories.4ff1550d.js","sources":["../../src/component/form/form-select-chips/FormSelectChips.tsx"],"sourcesContent":["import { ChipList } from \"@jam-dev/starlight-react\";\nimport { useState } from \"react\";\nimport { FormSelect, FormSelectOption } from \"../form-select/FormSelect\";\nimport './FormSelectChips.css';\n\nexport interface FormSelectChipsProps {\n  id: string;\n  initialValue?: string;\n  label?: string;\n  onChange?: (values: string[]) => any;\n  options?: FormSelectOption[];\n  placeholder?: string;\n}\n\nexport const FormSelectChips = ({id, initialValue, label, onChange, options, placeholder}: FormSelectChipsProps) => {\n  const [chipValues, setChipValues] = useState<string[]>([]);\n\n  const sortOptions = (options: FormSelectOption[]) => {\n    const newOptions = [...options];;\n    newOptions.sort((a, b) => a.name.localeCompare(b.name));\n    return newOptions;\n  }\n\n  const sortChips = (chips: string[]) => {\n    const newChips = [...chips];\n    newChips.sort((a, b) => a.localeCompare(b));\n    return newChips;\n  }\n\n  const getSelectOptions = (options: FormSelectOption[] | undefined, chipValues: string[]): FormSelectOption[] => {\n    if (!options) return [];\n\n    const selectOptions = options.filter(e => {\n      return !chipValues.includes(e.name);\n    });\n\n    return sortOptions(selectOptions);\n  }\n\n  const handleChangeOption = (value: string) => {\n    const deletedOption = options?.find(e => e.value === value);\n    if (!deletedOption) return;\n\n    const newChipValues = sortChips([...chipValues, deletedOption.name])\n    setChipValues(newChipValues);\n\n    if (onChange) onChange(newChipValues);\n  }\n\n  const handleDeleteChip = (value: string) => {\n    const addedOption = options?.find(e => e.name === value);\n    const deletedChip = chipValues.find(e => e === value);\n    if (!addedOption || !deletedChip) return;\n\n    const newChipValues = chipValues.filter(e => e !== value);\n    setChipValues(newChipValues);\n\n    if (onChange) onChange(newChipValues);\n  }\n\n  return(\n    <div className='rclib-form-select-chips'>\n      <FormSelect\n        id={id}\n        initialValue={initialValue}\n        label={label}\n        onChange={handleChangeOption}\n        options={getSelectOptions(options, chipValues)}\n        placeholder={placeholder}\n      />\n      {\n        chipValues.length > 0 ?\n        <ChipList\n          onDelete={handleDeleteChip}\n          values={chipValues}\n        /> :\n        null\n      }\n    </div>\n  );\n}\n"],"names":["FormSelectChips","__name","id","initialValue","label","onChange","options","chipValues","setChipValues","useState","sortOptions","options2","newOptions","sortChips","chips","newChips","getSelectOptions","chipValues2","selectOptions","e","handleChangeOption","value","deletedOption","newChipValues","handleDeleteChip","addedOption","deletedChip","_jsxs","_jsx","FormSelect","placeholder","ChipList"],"mappings":"wSAcO,MAAAA,EAAAC,EAAA,CAAA,CAAyB,GAAAC,EAACA,aAAAA,EAAIC,MAAAA,EAAcC,SAAAA,EAAOC,QAAAA,EAAUC,YAAAA,CAA0C,IAAA,CAC5G,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAA,CAAA,CAAA,EAEAC,EAAAT,EAAAU,GAAA,CACE,MAAAC,EAAA,CAAA,GAAAD,CAAA,EACAC,OAAAA,EAAAA,KAAAA,CAAAA,EAAAA,IAAAA,EAAAA,KAAAA,cAAAA,EAAAA,IAAAA,CAAAA,EACAA,CAAOA,EAHT,eAMAC,EAAAZ,EAAAa,GAAA,CACE,MAAAC,EAAA,CAAA,GAAAD,CAAA,EACAC,OAAAA,EAAAA,KAAAA,CAAAA,EAAAA,IAAAA,EAAAA,cAAAA,CAAAA,CAAAA,EACAA,CAAOA,EAHT,aAMAC,EAAAf,EAAA,CAAAU,EAAAM,IAAA,CACE,GAAA,CAAAN,EAAc,MAAA,GAEd,MAAAO,EAAAP,EAAA,OAAAQ,GACE,CAAAF,EAAA,SAAAE,EAAA,IAAA,CAAkC,EAGpC,OAAAT,EAAAQ,CAAA,CAAgC,EAPlC,oBAUAE,EAAAnB,EAAAoB,GAAA,CACE,MAAAC,EAAAhB,GAAA,YAAAA,EAAA,KAAAa,GAAAA,EAAA,QAAAE,GACA,GAAA,CAAAC,EAAoB,OAEpB,MAAAC,EAAAV,EAAA,CAAA,GAAAN,EAAAe,EAAA,IAAA,CAAA,EACAd,EAAAA,CAAAA,EAEAH,GAAcA,EAAAA,CAAAA,CAAsB,EAPtC,sBAUAmB,EAAAvB,EAAAoB,GAAA,CACE,MAAAI,EAAAnB,GAAA,YAAAA,EAAA,KAAAa,GAAAA,EAAA,OAAAE,GACAK,EAAAnB,EAAA,KAAAY,GAAAA,IAAAE,CAAA,EACA,GAAA,CAAAI,GAAA,CAAAC,EAAkC,OAElC,MAAAH,EAAAhB,EAAA,OAAAY,GAAAA,IAAAE,CAAA,EACAb,EAAAA,CAAAA,EAEAH,GAAcA,EAAAA,CAAAA,CAAsB,EARtC,oBAWA,OAAAsB,EAAA,MAAA,CACE,UAAA,0BAAe,SAAA,CAAAC,EAAAC,EAAA,CACF,GAAA3B,EACT,aAAAC,EACA,MAAAC,EACA,SAAAgB,EACUA,QAAAA,EAAAA,EAAAA,CAAAA,EACmC,YAAAU,CAC7C,CAAA,EAAAvB,EAAA,OAAA,EAAAqB,EAAAG,EAAA,CAIS,SAAAP,EACGA,OAAAA,CACFjB,CAAAA,EAAAA,IAAAA,CAEN,CAAA,CAIZ,EAlEO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}